<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>Blog | @graememcc | Graeme McCutcheon&#039;s corner of the web</title>
<link rel="alternate" type="application/rss+xml" title="@graememcc &raquo; Feed" href="http://www.graememcc.co.uk/feed/" />
<link rel='stylesheet' id='syntax-style-css'  href='../css/style.css' type='text/css' media='all' />
<link href='http://fonts.googleapis.com/css?family=Merriweather:400,300' rel='stylesheet' type='text/css'>
</head>

<body class="home page page-id-20 page-template-default custom-background">
  <div id="page" class="hfeed site">
    <header id="masthead" class="site-header" role="banner">
      <div class="site-header-wrapper clear">
        <div class="site-branding">
          <h1 class="site-title"><a href="http://www.graememcc.co.uk/" title="@graememcc" rel="home">@graememcc</a></h1>
<!--<h2 class="site-description">Graeme McCutcheon&#039;s corner of the web</h2>-->
        </div>
      </div>
      <nav id="mynav">
        <div class="site-header-wrapper align-right">
        <ul>
          <li><a href="https://github.com/graememcc/" target="_blank">Github</a></li>
          <li><a href="http://www.graememcc.co.uk/projects/">Projects</a></li>
          <li><a href="http://www.graememcc.co.uk/blog/">Blog</a></li>
          <li><a href="http://www.graememcc.co.uk/">Home</a></li>
        </ul>
      </div>
      </nav>
    </header><!-- #masthead -->
  <div id="main" class="site-main">
    <div id="primary" class="content-area">
      <div id="content" class="site-content" role="main">
        <aside class="update">Note: for technical reasons, this is currently a (temporary) static copy of my blog. Comments are disabled, and existing comments are not
                          visible. Normal service will be resumed as soon as possible.</aside>
        <article class="post-20 page type-page status-publish hentry">
          <header class="entry-header">
            <a href="http://www.graememcc.co.uk/2012/06/12/introducing-m-cmerge"><h2>Google Search in New Tab page</h2></a>
          </header>
          <div class="entry-content">
  <p>
  When using Firefox, I realised I am forever performing the sequence Ctrl-T followed by Ctrl-K to start a Google search in a new tab. However, I find the standard new tab page useful, so I didn't necessarily want to change my new tab page setting (you can change the page by tweaking browser.newtab.url in about:config).
  </p>
  <p>
  This sounds like a job for an add-on.
  </p>
  <figure>
    <a href="http://www.graememcc.co.uk/wp-content/uploads/2012/10/addon.png"><img class="size-large wp-image-151" title="Google search in the new tab page" src="http://www.graememcc.co.uk/wp-content/uploads/2012/10/addon-1024x436.png" alt="" width="580" height="246" /></a>
    <figcaption>My add-on in action</figcaption>
  </figure>
  <p>
  And so I built one. The input is conveniently autofocused, so one can just Ctrl-T and start the search. I guess I'll eventually want to make things like the search engine configurable, and it's not particularly pretty, but for now, it's a great help!
  </p>
  <p>
  Edit: the add-on is now up on <a title="My add-on!" href="https://addons.mozilla.org/en-US/firefox/addon/add-google-search-to-new-ta/" target="_blank">addons.mozilla.org</a>.
  </p>
          </div>
         </article>
        <article class="post-20 page type-page status-publish hentry">
          <header class="entry-header">
            <a href="http://www.graememcc.co.uk/2012/09/21/more-m-cmerge-updates"><h2>more m-cMerge updates</h2></a>
          </header>
          <div class="entry-content">
  <p>
  A couple more <a title="m-cMerge" href="http://paas.allizom.org/bugherder">m-cMerge</a> improvements have now landed.
  </p>
  <h3>Bug Assignees</h3>
  <p>
  m-cMerge will now attempt to set the bug assignee in certain circumstances. Specifically, the following must hold:
  </p>
  <ul>
   	<li>The current assignee for the bug is nobody@mozilla.org</li>
   	<li>If there is more than one changeset for a particular bug, the changeset author must be the same for each of the bug's changesets</li>
   	<li>The changeset author email must be a valid Bugzilla user email</li>
  </ul>
  <p>
  The summary page will highlight any bugs where the assignee was set:
  </p>
  <figure>
    <a href="http://www.graememcc.co.uk/wp-content/uploads/2012/09/email.png"><img class="size-full wp-image-143" title="email" src="http://www.graememcc.co.uk/wp-content/uploads/2012/09/email.png" alt="m-cMerge summary page with email" width="1003" height="170" /></a>
    <figcaption>When m-cMerge has set the assignee, it will highlight this</figcaption>
  </figure>
  <a class="more-link" href="http://www.graememcc.co.uk/2012/09/21/more-m-cmerge-updates/#more">Read more</a>
          </div>
         </article>
        <article class="post-20 page type-page status-publish hentry">
          <header class="entry-header">
            <a href="http://www.graememcc.co.uk/2012/09/14/m-cmerge-and-status-flags"><h2>m-cMerge and status flags</h2></a>
          </header>
          <div class="entry-content">
  <p>
  For a while, <a title="m-cMerge" href="http://paas.allizom.org/bugherder/" target="_blank">m-cMerge</a> has been blundering along, ignorant of the various flags our hard-working release drivers use to track fixes across the various trains. It wasn't alone - a recent thread on <a title="dev-planning" href="https://groups.google.com/forum/?fromgroups=#!topic/mozilla.dev.planning/93ARD6nh3VU" target="_blank">dev-planning</a> showed that many developers - myself included - weren't fully aware of what was required.
  </p>
  <p>
  Well, now the rules are clear, so m-cMerge has been brought in to line.
  </p>
  <a class="more-link" href="http://www.graememcc.co.uk/2012/09/14/m-cmerge-and-status-flags/#more">Read more</a>
          </div>
         </article>
        <article class="post-20 page type-page status-publish hentry">
          <header class="entry-header">
            <a href="http://www.graememcc.co.uk/2012/08/07/handling-large-backouts-with-m-cmerge"><h2>Handling large backouts with m-cMerge</h2></a>
          </header>
          <div class="entry-content">
  <p>
  <a title="m-cMerge" href="http://paas.allizom.org/bugherder/" target="_blank">m-cMerge</a> has been updated regularly since it was <a title="Introducing m-cMerge" href="http://www.graememcc.co.uk/2012/06/12/introducing-m-cmerge.html" target="_blank">unveiled</a>. One recent update added the ability to handle pushes from trees other than mozilla-central. There are plenty of times where large patch series land on integration repositories such as mozilla-inbound, and marking them is as much of a chore as marking merges.
  </p>
  <p>
  I've now taken this to its logical conclusion, and added the ability for m-cMerge to handle backouts as well. You often see sweeping backouts on mozilla-inbound, trying to get the tree back to a green state. Most of the time each of those bugs will be getting commented with the same information - a reason for the backout, and the rev URLs of the backout changesets. That sounds perfect for automation!
  </p>
  <p>
  m-cMerge will now handle backouts in certain circumstances. Specifically, there can be no fixes landing in the same push, or a fix and its backout landing in the same push. I don't think we lose anything with these restrictions - you're unlikely to be landing new code as well as trying to clean up the tree. Equally, you're unlikely to land a fix and back it out again in the same push - the only scenario where that could happen is a merge, and the backout commenting should already have been done when the backout hit the integration repo.
  </p>
  <p>
  When given a backout revision, m-cMerge will attempt to attach the relevant bugs to pushes, as normal.
  </p>
  <figure>
    <a href="http://www.graememcc.co.uk/wp-content/uploads/2012/08/Backout2.png"><img class="size-full wp-image-115" title="Backout2" src="http://www.graememcc.co.uk/wp-content/uploads/2012/08/Backout2.png" alt="" width="981" height="312" /></a>
    <figcaption>m-cMerge will detect the bugs affected by the backout<figcaption>
  </figure>
  <p>
  As always, the "Add", "Remove" and "Change" buttons allow for manual review, and correction of anything that has been misdetected.
  </p>
  <p>
  If you are dealing with a mozilla-central backout, you will be offered the opportunity to reopen the bug.
  </p>
  <figure>
    <a href="http://www.graememcc.co.uk/wp-content/uploads/2012/08/backout1.png"><img class="size-full wp-image-116" title="backout1" src="http://www.graememcc.co.uk/wp-content/uploads/2012/08/backout1.png" alt="" width="1017" height="315" /></a>
    <figcaption>RESOLVED FIXED? Let me reopen that for you.</figcaption>
  </figure>
  <p>
  Note in this case the "comment" and "reopen" options are linked - you wouldn't want to reopen a bug without explanation, nor would you post the backout revisions without making the patch author aware he/she was backed out.
  </p>
  <p>
  You can manually edit the comments if you wish. However, if you need to add the same backout explanation to every bug, there is another solution. When you hit submit, m-cMerge will look at all the bugs whose comment still starts with the changeset URL, and for those, it will present you with the following dialog:
  </p>
  <figure>
    <a href="http://www.graememcc.co.uk/wp-content/uploads/2012/08/Backout3.png"><img class="size-large wp-image-117" title="Backout3" src="http://www.graememcc.co.uk/wp-content/uploads/2012/08/Backout3-1024x242.png" alt="" width="580" height="137" /></a>
    <figcaption>Adding the same explanation to multiple bugs is easy</figcaption>
  </figure>
  <p>
  This will allow you to add some explanatory text prior to the changeset URL. Checking the checkbox will add the same text to any unedited bug comments that have not yet been submitted, and won't prompt you again. Leaving it unchecked will prompt you to enter text for the next bug when it is ready to be submitted. Hitting ESC or Cancel will transmit the change for this bug without any additional comment text. Leave the textarea empty and check the box to send all comments as they are.
  </p>
  <p>
  As always, report any bugs in the <a title="BitBucket bug tracker" href="https://bitbucket.org/graememcc/m-cmerge/issues" target="_blank">BitBucket bug tracker</a>. I hope this proves useful.
  </p>
          </div>
         </article>
        <article class="post-20 page type-page status-publish hentry">
          <header class="entry-header">
            <a href="http://www.graememcc.co.uk/2012/08/05/pushlog-urls-now-printed-when-pushing-to-mozilla-central"><h2>Pushlog URLs now printed when pushing to mozilla-central</h2></a>
          </header>
          <div class="entry-content">
  <p>
	When pushing to mozilla-central or mozilla-inbound, one of the first things you are likely to do post-push is copy and paste the changeset URL into the relevant bug. To help, I fixed <a title="Bug 663585" href="https://bugzilla.mozilla.org/show_bug.cgi?id=663585" target="_blank">bug 663585</a>, which has now been enabled on some of our main repositories.
  </p>
  <p>
  When pushing, you should now see something like this:
  </p>
  <pre>graememcc@Vitalstatistix:~/moz/hghooks/fakes/mcclone$ hg push
  pushing to /home/graememcc/moz/hghooks/fakes/mozilla-central
  searching for changes
  adding changesets
  adding manifests
  adding file changes
  added 1 changesets with 1 changes to 1 files
  You can view your change at the following URL:
      https://hg.mozilla.org/mozilla-central/rev/b945bf7017be</pre>
  </p>
  <p>
  If you're pushing a large number of changes, the individual URLs cease to be useful. Instead, you will see:
  <pre>You can view the pushlog for your changes at the following URL:
    https://hg.mozilla.org/mozilla-central/pushloghtml?changeset=4464ac64628a</pre>
  </p>
  <p>
  Admittedly this won't directly, help you with marking bugs, but it's perfect for pasting into <a title="m-cMerge" href="https://paas.allizom.org/bugherder/" target="_blank">m-cMerge</a> for automating the bug commenting (m-cMerge can now handle general commits to <em>any</em> tree not just mozilla-central).
  </p>
  <p>
  Finally, when pushing to Try, the results of your builds are more relevant. Hence:
  </p>
  <pre>You can view the progress of your build at the following URL:
    https://tbpl.mozilla.org/?tree=Try&amp;rev=15ecf264d328</pre>
  <p>
  I hope you find these changes useful!
  </p>
          </div>
         </article>
        <article class="post-20 page type-page status-publish hentry">
          <header class="entry-header">
            <a href="http://www.graememcc.co.uk/2012/06/12/introducing-m-cmerge"><h2>Introducing m-cMerge</h2></a>
          </header>
          <div class="entry-content">
  <p>
  In the summer of 2011, the integration branch mozilla-inbound was created, to allow Mozilla contributors to land patches without having to wait multiple hours afterwards waiting for your builds to complete. A team of inbound-sheriffs monitor the tree, dealing with failures and backing out where appropriate. About once a day, one of the sheriffs would merge the changes to mozilla-central, and after the merge spend the next 90 minutes marking the bugs as resolved and pasting the pushlog URLs into each bug's comments. And thus your patch made it to mozilla-central!
  </p>
  <p>
  Wait a minute, after the merge the sheriffs did what?!?
  </p>
  <p>
  We have some smart people acting as inbound sheriffs. This does not seem like the best use of their time. It always bugged me, even though I've never merged myself. I wanted to do something about it. However, I felt it would be difficult to fully automate - even with our current restrictions, a wide variety of commit messages is possible. Accurately parsing them 100% of the time would be...hard. Throw in security bugs, and inbound's propensity to get so hosed that it has to be closed for a bit of "BACK OUT ALL THE THINGS!"...
  </p>
  <p>
  That said, I didn't think all was lost. As Kernighan and Plauger said, most users will be willing to meet you halfway, and be ecstatic if you manage 90% of the work.  I decided to see if we could get 90% of the way there.
  </p>
  <p>
  <a class="more-link" href="http://www.graememcc.co.uk/2012/06/12/introducing-m-cmerge/#more">Read more</a>
          </div>
        </article>
        <article class="post-20 page type-page status-publish hentry">
          <header class="entry-header">
            <a href="http://www.graememcc.co.uk/2012/05/17/trust-in-mozilla"><h2>Trust in Mozilla</h2></a>
          </header>
          <div class="entry-content">
  <p>
  I'm still working on something to assist those merging to mozilla-central.  I'm almost ready to start talking to Bugzilla.  Obviously, one can't test on <a title="b.m.o" href="https://bugzilla.mozilla.org" target="_blank">b.m.o</a>, so off to the test server - Landfill - we go. Now, I'll need to handle security bugs, and users who may or may not be able to modify them. I emailed <a title="Gerv" href="http://blog.gerv.net/">Gerv</a>, to see if it would be possible to emulate the b.m.o. security bug configuration in the bzapi sandbox. His reply? Sure you can, and have some admin privileges so you can set things up as you wish.
  </p>
  <a class="more-link" href="http://www.graememcc.co.uk/2012/05/17/trust-in-mozilla/#more">Read more</a>
          </div>
        </article>
        <article class="post-20 page type-page status-publish hentry">
          <header class="entry-header">
            <a href="http://www.graememcc.co.uk/2012/05/03/current-status"><h2>Current status</h2></a>
          </header>
          <div class="entry-content">
  <p>
  I've been reminded that I've not been poor at updating the blog. Mea culpa. Anyway, some recent fixes of note:
  </p>
  <ul><li>Bug <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=686203">686203</a> - Focused contenteditable can prevent other elements from getting focused on right-click, which also fixed bug <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=578771">578771</a> and possibly more!</li>
  <li>Bug <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=740784">740784</a> - Undo (Ctrl+z) in textarea adding a newline (\\n) to the text</li>
  <li>Bug <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=747163">747163</a> - TelemetryHistogramType returns failure for HISTOGRAM_FLAG</li>
  <li>Bug <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=747379">747379</a> - Cloning a flag histogram with Telemetry::HistogramFrom breaks the "only one count" invariant</li>
  </ul>
  <a class="more-link" href="http://www.graememcc.co.uk/2012/05/03/current-status/#more">Read more</a>
          </div>
        </article>
        <article class="post-20 page type-page status-publish hentry">
          <header class="entry-header">
            <a href="http://www.graememcc.co.uk/2012/01/15/status-update-15-january-2012"><h2>Status Update: 15 January 2012</h2></a>
          </header>
          <div class="entry-content">
  <p>
    A frustrating week, with a good chunk of it lost to the landing of <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=715952">bug 715952</a>, which seemed to tickle a bug in my graphics card driver, resulting in a crash almost every time I tried to launch a trunk build. Spent a ridiculous amount of time sshing into my box trying to remote-debug the problem, with little success. The problem was solved by an upgrade of my driver to the latest ATI proprietary drivers, but that was somewhat hairy, and proved to be another timesink.
  </p>
  <ul>
    <li>Have slowed down my Tinderboxpushlog investigations - the bug I was trying to solve is looking more like an IT problem at Mozilla. That said, I have been fleshing out some ideas about how to improve this tool.</li>
    <li>Started work on a little webapp, more details soon...</li>
  </ul>
          </div>
        </article>
        <article class="post-20 page type-page status-publish hentry">
          <header class="entry-header">
            <a href="http://www.graememcc.co.uk/2012/01/07/status-update-7-january-2012"><h2>Status Update: 7 January 2012</h2></a>
          </header>
          <div class="entry-content">
  <p>
  Perhaps a quiet week in terms of activity from an external point of view.
  </p>
  <p>
  <ul>
  <li>Landed <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=471319">bug 471319</a> - undoing the last action of a textbox immediately after emptytext was displayed inserts a line feed (breaks search textbox)</li>
  <li>Started investigating <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=263049">bug 263049</a> - Find doesn't work in XML tree view. More investigation required.</li>
  <li>Started studying Tinderboxpushlog, in part to look at fixing <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=699711">bug 699711</a>, but also so I can document it - current documentation is scant - and take a crack at fixing some other bugs. I aim to have the bug and docs wrapped up early next week.</li>
  <li>Brought my Mozilla activities up-to-date at <a href="https://developer.mozilla.org/User:Graememcc"> https://developer.mozilla.org/User:Graememcc</a></li>
  <li><a href="http://www.codinghorror.com/blog/2008/11/we-are-typists-first-programmers-second.html">"We are typists first, programmers second"</a> - put some practise into learning touch-typing, to improve productivity</li>
  </ul>
          </div>
        </article>
        <article class="post-20 page type-page status-publish hentry">
          <header class="entry-header">
            <a href="http://www.graememcc.co.uk/2011/12/13/the-commitment"><h2>The Commitment</h2></a>
          </header>
          <div class="entry-content">
<p>
This week, I turned my life upside-down.
</p>
<p>
I studied Computing Science at university. However, I never moved in to the computing industry post-graduation, and went another path. This never fully satisfied me, and I finally have taken steps to perform a career-switch.
</p>
<p>
Meanwhile, since the end of 2007, I've been sneaking some patches in to Mozilla Firefox. Due to time pressures, I've only ever been able to contribute fairly humble patches. I always longed to do more.
</p>
<p>
Today, I sent the following email to various Mozilla people.
</p>
<a class="more-link" href="http://www.graememcc.co.uk/2011/12/13/the-commitment/#more">Read more</a>
          </div><!-- .entry-content -->
        </article><!-- #post-## -->
      </div><!-- #content -->
    </div><!-- #primary -->
  </div><!-- #main -->
  <footer id="colophon" class="site-footer" role="contentinfo">
  </footer><!-- #colophon -->
  </div><!-- #page -->
  <link rel='stylesheet' id='custom-css'  href='../css/custom.css' type='text/css' media='all' />
</html>
